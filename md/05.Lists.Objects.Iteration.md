
## Data Management
### Lists, Objects, Iteration

Note: Today we'll learn how to organize groups of data (lists & objects) and how to work with them using iteration — to make music.

---H


## How Do We Keep Track of Things?

<span class="fragment">Let's say we have a bunch of **Labubu's &#x1f479;**.</span>

<span class="fragment">How can we keep track of them?</span>

---H

### Keeping Track of my Labubus

<ol>
<li class="fragment fade-in">Keep them <i>in order</i></li>
<ol>
<li class="fragment fade-in">Labubu</li>
<li class="fragment fade-in">Labubu</li>
<li class="fragment fade-in">Labubu</li>
</ol>
<li class="fragment fade-in">Or give each one a <i>label</i></li>
<ul>
<li class="fragment fade-in">Soy Milk Labubu</li>
<li class="fragment fade-in">Sisi Labubu</li>
<li class="fragment fade-in">Serenity Labubu</li>
</ul>
</ol>
---H

### Keeping things in order
#### Lists (Arrays)

- A **list** in JavaScript is called an **array**
- Arrays store multiple values in order
- Use `[]` to create them

```js
const pitches = [60, 62, 64, 65, 67];
```

Note: Arrays are the simplest way to store multiple values like MIDI notes or frequencies.

---H

### Naming Things
#### Objects

Sometimes we don't just want order,  
we want to **label** each thing.

That's what **objects** are for:

```js
const pitchesObj = {
  first: 60,
  second: 62,
  third: 64,
  fourth: 65,
  fifth: 67
};
```


---H
## Arrays vs. Objects

**Array**

```js
const pitches = [60, 62, 64];
```

* Ordered by index (0, 1, 2&hellip;)
* Access with `pitches[1]` &rarr; `62`

**Object**

```js
const note = {pitch: 60, duration: 1};
```

* Organized by **keys** (names)
* Access with `note.pitch` &rarr; `60`

Note: Arrays care about *order*, objects care about *labels*.

---H

## Using Arrays for Sound

```js
const ctx = new AudioContext();
const master = new GainNode(ctx, {gain:0.1});
master.connect(ctx.destination);

const pitches = [60, 62, 64, 65, 67]; // MIDI notes

const mtof = function(m) {
  return 440 * 2**((m-69)/12);
};

const playNote = function(midi, t) {
  const osc = new OscillatorNode(ctx, {frequency:mtof(midi)});
  osc.connect(master);
  osc.start(t);
  osc.stop(t+0.5);
};
```

Note: These functions turn MIDI note numbers into audible pitches.

---H

## What is Iteration?

* Iteration = **repeating an action for each item** in a group
* Instead of writing the same code many times:

```js
playNote(60, ctx.currentTime);
playNote(62, ctx.currentTime+0.5);
playNote(64, ctx.currentTime+1);
```

* We let the computer **loop** through the values for us

Note: Iteration saves time and avoids repetition.

---H

## Iteration (while loop)

Iterating using a **while loop**:  

```js
let i = 0;
while (i < 4) {
  console.log("Step:", i);
  i = i + 1; // add 1 each time
}
```

* `let i = 0` &rarr; start value
* `i < 4` &rarr; keep going while true
* `i = i + 1` &rarr; increase by 1

Note: This shows the mechanics of iteration clearly.

---H

## Shortcut for Adding 1

Instead of `i = i + 1`, we can write:

```js
i++;
```

So the while loop becomes:

```js
let i = 0;
while (i < 4) {
  console.log("Step:", i);
  i++; // shortcut version
}
```

Note: `i++` is the shorthand for “increase i by 1.”

---H

## For Loop (shorthand)

The **for loop** bundles everything together:

```js
for (let i = 0; i < 4; i++) {
  console.log("Step:", i);
}
```

* `let i = 0` &rarr; start value
* `i < 4` &rarr; keep going while true
* `i++` &rarr; add 1 each time

Note: For loops are just a compact version of while loops.

---H

## Iterating Through the Array

```js
let now = ctx.currentTime;

for (let i = 0; i < pitches.length; i++) {
  playNote(pitches[i], now + i*0.6);
}
```

Note: Iteration makes it easy to play a whole melody from a list.

---H



## Iterating Through Objects

```js
let start = ctx.currentTime;

for (const key in melody) {
    let n = melody[key];
    playNote(n.pitch, start);
    start += n.duration;
}
```

Note: Each object gives us a pitch and duration, and iteration schedules them in time.

---H

## Stepping Through Over Time

Instead of scheduling all notes at once,
we can step through them one by one:

```js
let index = 0;

const stepMelody = function() {
  let n = myPitches[index];
  playNote(n.pitch, ctx.currentTime);
  index = (index + 1) % melody.length; // loop around
};

setInterval(stepMelody, 600); // every 600 ms
```

Note: `setInterval` calls our function repeatedly, stepping through the array like a sequencer.

---H

## forEach Example

```js
pitches.forEach(function(p, i) {
  playNote(p, ctx.currentTime + i*0.4);
});
```

Note: `forEach` is another way to loop through arrays, often cleaner to read.

---H

## Wrap-Up

* **Arrays** = ordered lists of values
* **Objects** = key:value pairs of data
* **Iteration** = repeating an action for each element
* **Stepping** = sequencing through notes in time
* Put together &rarr; you can structure melodies, rhythms, and whole musical pieces in code

Note: These tools let us move from individual sounds to structured musical ideas.

